{% load static %}
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>User Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
</head>
<body class="bg-gray-100 min-h-screen flex flex-col items-center justify-center">
    <div class="w-full max-w-2xl bg-white rounded-lg shadow-lg p-8 mt-10 relative">
        <form action="{% url 'logout' %}" method="post" style="position:absolute; top:1rem; right:1rem;">
            {% csrf_token %}
            <button type="submit" class="bg-red-500 hover:bg-red-600 text-white px-4 py-2 text-sm rounded-lg">Logout</button>
        </form>
        <h1 class="text-2xl font-bold mb-6 text-center text-blue-700">My Loans & Fines</h1>
        <h2 class="text-xl font-semibold mb-4">Loans</h2>
        <table class="w-full table-auto mb-8">
            <thead>
                <tr>
                    <th class="px-4 py-2">Book</th>
                    <th class="px-4 py-2">Loan Date</th>
                    <th class="px-4 py-2">Due Date</th>
                    <th class="px-4 py-2">Return Date</th>
                    <th class="px-4 py-2">Status</th>
                </tr>
            </thead>
            <tbody>
                {% for loan in loans %}
                <tr>
                    <td class="px-4 py-2">{{ loan.book.title }}</td>
                    <td class="px-4 py-2">{{ loan.loan_date }}</td>
                    <td class="px-4 py-2">{{ loan.due_date }}</td>
                    <td class="px-4 py-2">{{ loan.return_date|default:'-' }}</td>
                    <td class="px-4 py-2">{{ loan.status }}</td>
                </tr>
                {% empty %}
                <tr><td colspan="5" class="text-center text-gray-500">No loans yet.</td></tr>
                {% endfor %}
            </tbody>
        </table>
        <h2 class="text-xl font-semibold mb-4">Fines</h2>
        <table class="w-full table-auto">
            <thead>
                <tr>
                    <th class="px-4 py-2">Book</th>
                    <th class="px-4 py-2">Amount</th>
                    <th class="px-4 py-2">Paid</th>
                </tr>
            </thead>
            <tbody>
                {% for fine in fines %}
                <tr>
                    <td class="px-4 py-2">{{ fine.book.title }}</td>
                    <td class="px-4 py-2">{{ fine.amount }}</td>
                    <td class="px-4 py-2">{{ fine.paid|yesno:'Yes,No' }}</td>
                </tr>
                {% empty %}
                <tr><td colspan="2" class="text-center text-gray-500">No fines yet.</td></tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</body>
</html> 